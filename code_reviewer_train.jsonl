{"instruction":"Review the following code and identify issues and improvements.","input":"def average(nums):\n    return sum(nums) / len(nums)","output":"Code Intent:\nCompute the average of a list of numbers.\n\nIssues Found:\n- Correctness: Does not handle empty lists.\n\nImpact:\nCalling this function with an empty list raises ZeroDivisionError.\n\nSuggested Improvements:\nAdd input validation.\n\nRevised Code:\ndef average(nums):\n    if not nums:\n        raise ValueError(\"Input list must not be empty\")\n    return sum(nums) / len(nums)"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def read_file(path):\n    f = open(path)\n    return f.read()","output":"Code Intent:\nRead file contents.\n\nIssues Found:\n- Resource leak: File not closed.\n\nImpact:\nMay exhaust file descriptors.\n\nSuggested Improvements:\nUse context manager.\n\nRevised Code:\ndef read_file(path):\n    with open(path, \"r\") as f:\n        return f.read()"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def find_max(nums):\n    max = 0\n    for n in nums:\n        if n > max:\n            max = n\n    return max","output":"Code Intent:\nFind maximum value.\n\nIssues Found:\n- Shadows built-in name.\n- Incorrect for negative-only lists.\n\nImpact:\nReturns wrong results.\n\nSuggested Improvements:\nInitialize from first element.\n\nRevised Code:\ndef find_max(nums):\n    if not nums:\n        raise ValueError(\"Empty list\")\n    current_max = nums[0]\n    for n in nums[1:]:\n        if n > current_max:\n            current_max = n\n    return current_max"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def is_even(n):\n    if n % 2 == 0:\n        return True\n    else:\n        return False","output":"Code Intent:\nCheck even number.\n\nIssues Found:\n- Redundant conditional.\n\nSuggested Improvements:\nReturn expression directly.\n\nRevised Code:\ndef is_even(n):\n    return n % 2 == 0"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def get_user(data):\n    return data['user']['name']","output":"Code Intent:\nGet user name.\n\nIssues Found:\n- Assumes keys exist.\n\nImpact:\nKeyError risk.\n\nSuggested Improvements:\nHandle missing keys.\n\nRevised Code:\ndef get_user(data):\n    try:\n        return data['user']['name']\n    except (KeyError, TypeError):\n        return None"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def factorial(n):\n    if n == 0:\n        return 1\n    return n * factorial(n - 1)","output":"Code Intent:\nCompute factorial.\n\nIssues Found:\n- No validation for negative input.\n\nImpact:\nInfinite recursion possible.\n\nSuggested Improvements:\nValidate input.\n\nRevised Code:\ndef factorial(n):\n    if n < 0:\n        raise ValueError(\"n must be non-negative\")\n    result = 1\n    for i in range(1, n + 1):\n        result *= i\n    return result"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def merge_lists(a, b):\n    for x in b:\n        a.append(x)\n    return a","output":"Code Intent:\nMerge lists.\n\nIssues Found:\n- Mutates input list.\n\nImpact:\nUnexpected side effects.\n\nSuggested Improvements:\nReturn new list.\n\nRevised Code:\ndef merge_lists(a, b):\n    return a + b"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def login(user, pwd):\n    if user == 'admin' and pwd == '1234':\n        return True\n    return False","output":"Code Intent:\nAuthenticate user.\n\nIssues Found:\n- Hardcoded credentials.\n\nImpact:\nMajor security vulnerability.\n\nSuggested Improvements:\nUse hashed credentials and secure storage."}
{"instruction":"Review the following code and identify issues and improvements.","input":"def sum_numbers(nums):\n    total = 0\n    for i in range(len(nums)):\n        total += nums[i]\n    return total","output":"Code Intent:\nSum numbers.\n\nIssues Found:\n- Verbose iteration.\n\nSuggested Improvements:\nUse built-in sum.\n\nRevised Code:\ndef sum_numbers(nums):\n    return sum(nums)"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def parse_int(value):\n    return int(value)","output":"Code Intent:\nParse integer.\n\nIssues Found:\n- No error handling.\n\nImpact:\nCrashes on invalid input.\n\nSuggested Improvements:\nHandle exceptions.\n\nRevised Code:\ndef parse_int(value):\n    try:\n        return int(value)\n    except (TypeError, ValueError):\n        return None"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def get_last(items):\n    return items[-1]","output":"Code Intent:\nGet last element.\n\nIssues Found:\n- Fails on empty list.\n\nSuggested Improvements:\nCheck input.\n\nRevised Code:\ndef get_last(items):\n    if not items:\n        return None\n    return items[-1]"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def count_words(text):\n    return len(text.split(' '))","output":"Code Intent:\nCount words.\n\nIssues Found:\n- Incorrect with multiple spaces.\n\nSuggested Improvements:\nUse default split.\n\nRevised Code:\ndef count_words(text):\n    return len(text.split())"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def add_item(lst, item=[]):\n    item.append(1)\n    lst.append(item)\n    return lst","output":"Code Intent:\nAdd item.\n\nIssues Found:\n- Mutable default argument.\n\nImpact:\nShared state bugs.\n\nSuggested Improvements:\nUse None default.\n\nRevised Code:\ndef add_item(lst, item=None):\n    if item is None:\n        item = []\n    item.append(1)\n    lst.append(item)\n    return lst"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def divide(a, b):\n    return a / b","output":"Code Intent:\nDivide numbers.\n\nIssues Found:\n- Division by zero not handled.\n\nSuggested Improvements:\nValidate divisor.\n\nRevised Code:\ndef divide(a, b):\n    if b == 0:\n        raise ValueError(\"b must not be zero\")\n    return a / b"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def remove_duplicates(items):\n    result = []\n    for x in items:\n        if x not in result:\n            result.append(x)\n    return result","output":"Code Intent:\nRemove duplicates.\n\nIssues Found:\n- O(n^2) performance.\n\nSuggested Improvements:\nTrack seen elements.\n\nRevised Code:\ndef remove_duplicates(items):\n    seen = set()\n    result = []\n    for x in items:\n        if x not in seen:\n            seen.add(x)\n            result.append(x)\n    return result"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def reverse_string(s):\n    return ''.join(reversed(s))","output":"Code Intent:\nReverse string.\n\nIssues Found:\n- Overly complex.\n\nSuggested Improvements:\nUse slicing.\n\nRevised Code:\ndef reverse_string(s):\n    return s[::-1]"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def get_env():\n    import os\n    return os.environ['MODE']","output":"Code Intent:\nGet environment mode.\n\nIssues Found:\n- Key may not exist.\n\nSuggested Improvements:\nUse default.\n\nRevised Code:\ndef get_env():\n    import os\n    return os.environ.get('MODE', 'development')"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def square_list(nums):\n    result = []\n    for n in nums:\n        result.append(n*n)\n    return result","output":"Code Intent:\nSquare numbers.\n\nIssues Found:\n- Verbose loop.\n\nSuggested Improvements:\nUse list comprehension.\n\nRevised Code:\ndef square_list(nums):\n    return [n * n for n in nums]"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def is_palindrome(s):\n    return s == s[::-1]","output":"Code Intent:\nCheck palindrome.\n\nIssues Found:\n- Case and punctuation sensitive.\n\nSuggested Improvements:\nNormalize input.\n\nRevised Code:\ndef is_palindrome(s):\n    cleaned = ''.join(c.lower() for c in s if c.isalnum())\n    return cleaned == cleaned[::-1]"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def calculate(expr):\n    return eval(expr)","output":"Code Intent:\nEvaluate expression.\n\nIssues Found:\n- Unsafe eval usage.\n\nImpact:\nCode execution vulnerability.\n\nSuggested Improvements:\nAvoid eval, use safe parser."}
{"instruction":"Review the following code and identify issues and improvements.","input":"def multiply(a, b):\n    return a * b","output":"Code Intent:\nMultiply values.\n\nIssues Found:\n- No type hints.\n\nSuggested Improvements:\nAdd type annotations.\n\nRevised Code:\ndef multiply(a: float, b: float) -> float:\n    return a * b"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def sort_numbers(nums):\n    nums.sort()\n    return nums","output":"Code Intent:\nSort numbers.\n\nIssues Found:\n- Mutates input.\n\nSuggested Improvements:\nReturn sorted copy.\n\nRevised Code:\ndef sort_numbers(nums):\n    return sorted(nums)"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def greet(name):\n    return 'Hello ' + name","output":"Code Intent:\nGenerate greeting.\n\nIssues Found:\n- No type handling.\n\nSuggested Improvements:\nCast to string.\n\nRevised Code:\ndef greet(name):\n    return f\"Hello {str(name)}\""}
{"instruction":"Review the following code and identify issues and improvements.","input":"def log(msg):\n    open('log.txt', 'a').write(msg)","output":"Code Intent:\nLog message.\n\nIssues Found:\n- File not closed.\n\nSuggested Improvements:\nUse context manager.\n\nRevised Code:\ndef log(msg):\n    with open('log.txt', 'a') as f:\n        f.write(msg + '\n')"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def get_length(x):\n    return len(x)","output":"Code Intent:\nGet length.\n\nIssues Found:\n- None input not handled.\n\nSuggested Improvements:\nValidate input.\n\nRevised Code:\ndef get_length(x):\n    if x is None:\n        return 0\n    return len(x)"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def print_items(items):\n    for i in items:\n        print(i)","output":"Code Intent:\nPrint items.\n\nIssues Found:\n- Hard to test.\n\nSuggested Improvements:\nReturn string.\n\nRevised Code:\ndef print_items(items):\n    return '\n'.join(str(i) for i in items)"}
{"instruction":"Review the following code and identify issues and improvements.","input":"def unique_count(items):\n    return len(set(items))","output":"Code Intent:\nCount unique items.\n\nIssues Found:\n- Unhashable types fail.\n\nSuggested Improvements:\nDocument constraints or validate input."}
{"instruction":"Review the following code and identify issues and improvements.","input":"def noop():\n    pass","output":"Code Intent:\nNo operation.\n\nIssues Found:\n- Function does nothing.\n\nSuggested Improvements:\nRemove or document intent."}
